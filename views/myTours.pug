extends base

mixin navItem(link, text, icon, active)
  li(class=`${active ? 'side-nav--active' : ''}`)
    a(href=`${link}`)
      svg
        use(xlink:href=`img/icons.svg#icon-${icon}`)
      | #{text}    

block content 
  
  main.main
    .user-view
      nav.user-view__menu
        ul.side-nav
          +navItem('/me', 'Settings', 'settings')
          +navItem('/my-tours', 'My bookings', 'briefcase', true)
          +navItem('#', 'My reviews', 'star')
          +navItem('#', 'Billing', 'credit-card')
        - if(user.role === 'admin') 
          .admin-nav
            h5.admin-nav__heading Admin
            ul.side-nav
              +navItem('#', 'Manage tours', 'map')
              +navItem('#', 'Manage users', 'users')
              +navItem('#', 'Manage reviews', 'star')
              +navItem('#', 'Manage bookings', 'briefcase')
      .user-view__content
        .user-view__my-tours-container
          h2.heading-secondary.ma-bt-md My Tours          
          //- #{tour.imageCover}
          if bookings.length 
            .my-tours-tabel            
              .my-tours-header
                span 
                span Name
                span Duration
                span Price
                span Start
                span End
                span 
              .my-tours-rows          
                each booking in bookings                             
                  img(src=`img/tours/${booking.tour.imageCover}`, alt=`${booking.tour.name}`)
                  p #{booking.tour.name}
                  p #{`${booking.tour.duration} ${booking.tour.duration > 1 ? 'days': 'day'}`}
                  p $ #{booking.price}
                  p startday
                  p endday
                  button.btn.btn--green.btn--small(onclick=``) Review   
          else 
            p.heading-secondary.heading-secondary--error There is no Booking now.  